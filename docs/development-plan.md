# 開發計劃

## 第一階段：核心算法開發

### 1.1 農曆計算模組
- [ ] 公曆轉農曆
- [ ] 農曆轉公曆
- [ ] 閏月判斷
- [ ] 農曆大小月計算

### 1.2 天干地支計算
- [ ] 年干支計算
- [ ] 月干支計算（需考慮節氣）
- [ ] 日干支計算
- [ ] 時干支計算

### 1.3 節氣計算
- [ ] 二十四節氣精確時刻計算
- [ ] 節氣與農曆月份的對應

### 1.4 納音五行計算
- [ ] 六十甲子納音對照表
- [ ] 年月日納音計算

## 第二階段：吉凶計算系統

### 2.1 建除十二神計算
- [ ] 根據月份和日干支計算建除
- [ ] 建除對應的宜忌事項

### 2.2 吉神凶煞計算
- [ ] 天德、月德等吉神
- [ ] 五離、天刑等凶煞
- [ ] 神煞與日期的對應算法

### 2.3 宜忌事項生成
- [ ] 根據建除和神煞生成宜事
- [ ] 根據建除和神煞生成忌事

### 2.4 時辰吉凶計算
- [ ] 日干起時干規則
- [ ] 時辰與吉凶的對應算法
- [ ] 十二時辰評級（吉/凶/平）

## 第三階段：九宮飛星

### 3.1 年飛星計算
- [ ] 上中下元劃分
- [ ] 年運飛星入中宮

### 3.2 月飛星計算
- [ ] 月飛星計算規則

### 3.3 日飛星計算
- [ ] 日飛星計算規則

## 第四階段：前端開發

### 4.1 月曆視圖
- [ ] 月曆表格佈局
- [ ] 日期格顯示（農曆、干支、宜忌摘要）
- [ ] 節氣和節日標記
- [ ] 不同地區假期顯示（大陸/香港/澳門/台灣）

### 4.2 日曆詳情視圖
- [ ] 完整日期資訊顯示
- [ ] 宜忌事項完整列表
- [ ] 吉神凶煞列表
- [ ] 時辰吉凶表格

### 4.3 擇日功能
- [ ] 按事項查詢吉日
- [ ] 日期範圍選擇
- [ ] 結果列表顯示

### 4.4 年曆視圖
- [ ] 全年概覽
- [ ] 節氣標記

## 第五階段：API 開發

### 5.1 RESTful API
```
GET /api/calendar/:year/:month          # 獲取月曆資料
GET /api/date/:year/:month/:day         # 獲取指定日期詳情
GET /api/hourly/:year/:month/:day       # 獲取時辰吉凶
GET /api/search                          # 擇日查詢
    ?event=嫁娶                          # 要做的事
    &start=2026-01-01                    # 開始日期
    &end=2026-12-31                      # 結束日期
```

### 5.2 資料格式
- [ ] JSON 輸出格式
- [ ] 多語言支持（繁體/簡體）

## 技術選型建議

### 前端
- **框架**: React 18+ / Vue 3
- **狀態管理**: Zustand / Pinia
- **UI 庫**: Tailwind CSS / Ant Design
- **日期處理**: dayjs

### 後端
- **運行時**: Node.js 18+ / Bun
- **框架**: Express / Fastify / Hono
- **語言**: TypeScript

### 資料庫（可選）
- SQLite（輕量級，適合單機部署）
- PostgreSQL（適合多用戶）

## 資料來源

### 農曆資料
1. **香港天文台** - 提供精確的農曆資料
2. **壽星萬年曆算法** - 開源的農曆計算算法
3. **農曆數據表** - 1900-2100 年的農曆資料

### 吉凶資料
1. **協紀辨方書** - 傳統擇日經典
2. **通書** - 民間擇日參考

## 里程碑

| 階段 | 目標 | 交付物 |
|------|------|--------|
| M1 | 核心算法完成 | 農曆、干支、節氣計算 |
| M2 | 吉凶系統完成 | 每日宜忌、時辰吉凶 |
| M3 | 前端 MVP | 基本月曆和日曆視圖 |
| M4 | API 發布 | RESTful API |
| M5 | 完整功能 | 擇日查詢、多地區支持 |

## 測試計劃

### 單元測試
- 農曆轉換準確性測試
- 干支計算測試
- 節氣時刻測試

### 整合測試
- 與 forecasting.hk 資料對比驗證
- 邊界日期測試（年初年末、閏月）

### 性能測試
- 批量日期計算性能
- API 響應時間
